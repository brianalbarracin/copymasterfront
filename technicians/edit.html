<div class="card p-3">
  <h4>Editar Técnico</h4>
  <form id="form-edit-technician" class="row g-3"></form>
</div>

<script>
async function loadTechnicianEdit(){
  const params = new URLSearchParams(location.search);
  const id = params.get("id");
  if(!id) return;
  const t = await technicianService.get(id);

  const form = document.getElementById("form-edit-technician");
  form.innerHTML = `
    <div class="col-md-6"><label class="form-label">Nombre</label>
      <input class="form-control" name="fullName" value="${t.fullName||""}" required></div>
    <div class="col-md-6"><label class="form-label">Identificación</label>
      <input class="form-control" name="identification" value="${t.identification||""}"></div>
    <div class="col-md-6"><label class="form-label">Teléfono</label>
      <input class="form-control" name="phone" value="${t.phone||""}"></div>
    <div class="col-md-6"><label class="form-label">Email</label>
      <input class="form-control" name="email" value="${t.email||""}"></div>
    <div class="col-md-6"><label class="form-label">Activo</label>
      <select name="active" class="form-select">
        <option value="true" ${t.active?"selected":""}>Sí</option>
        <option value="false" ${!t.active?"selected":""}>No</option>
      </select></div>
    <div class="col-12">
      <button class="btn btn-success" type="submit">Guardar</button>
      <button type="button" class="btn btn-outline-secondary" onclick="appLoad('technicians/list.html')">Cancelar</button>
    </div>
  `;

  form.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form));
    data.active = data.active === "true";
    await technicianService.update(id, data);
    alert("Técnico actualizado");
    appLoad('technicians/detail.html?id='+id);
  });
}
document.addEventListener("DOMContentLoaded", loadTechnicianEdit);
</script>